<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
    <title>Happy Anniversary ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        /* üé® Anniversary Theme */
        :root{
            --bg1:#fff9f0;
            --bg2:#ffe4e1;
            --accent:#ff2e4c;
        }
        *{box-sizing:border-box}
        html,body{height:100%;margin:0;font-family:'Poppins',sans-serif;color:#2b1020;}

        .page{
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:0;
            position:relative;
            overflow:hidden;
            text-align:center;
        }

        /* Background Hearts (Moved to Slideshow side) */
        .bg-hearts{position:absolute;inset:0;pointer-events:none;z-index:0}
        .bg-hearts i{
            position:absolute; width:22px;height:22px; background:var(--accent);
            transform:rotate(45deg); opacity:.4; animation:float linear infinite; border-radius:2px;
        }
        @keyframes float{
            0%{transform:translateY(110vh) rotate(45deg);opacity:0}
            100%{transform:translateY(-20vh) rotate(45deg);opacity:0}
        }

        /* üì∏ SPLIT-SCREEN LAYOUT */
        #split-container {
            display: flex;
            width: 100%;
            min-height: 100vh;
            height: 100vh;
        }

        /* LEFT SIDE: PHOTO SLIDESHOW */
        #slideshow-background {
            width: 50%;
            position: relative;
            overflow: hidden;
            background-color: #FFFFFF;
        }

        .slideshow-photo {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        /* RIGHT SIDE: CONTENT CARD */
        #content-side {
            width: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--bg1), var(--bg2));
            padding: 5px; /* CONDENSED */
            box-shadow: -5px 0 10px rgba(0,0,0,0.1);
        }

        /* Main Card (Maximized for video) */
        .card{
            position:relative;
            z-index:10;
            width:100%;
            max-width:600px; /* CONDENSED */
            padding:20px; /* CONDENSED */
            margin: auto;
        }

        .top{
            display:flex; flex-direction: column; gap:10px; /* CONDENSED */ align-items:center; justify-content:center;
            padding-bottom:15px; border-bottom:1px solid rgba(0,0,0,0.05);
        }

        .photo{
            width:100px; /* CONDENSED */ height:100px; /* CONDENSED */ border-radius:50%;overflow:hidden;border:4px solid white;
            box-shadow:0 8px 20px rgba(0,0,0,0.15);
        }
        .photo img{width:100%;height:100%;object-fit:cover;display:block}

        h1{ font-family:'Great Vibes',cursive; font-size:36px; /* CONDENSED */ margin:0;color:#d12e4b;line-height: 1.2; }
        p.lead{margin:10px 0 0;line-height:1.6;color:#552233;font-size:16px; /* CONDENSED */}

        /* üî¥ RED HEART BUTTON */
        .reveal-wrap{
            margin-top:15px; /* CONDENSED */
            display:flex;
            flex-direction: column;
            align-items:center;
            gap:8px; /* CONDENSED */
        }

        .heart-btn{
            width:70px; /* CONDENSED */ height:70px; /* CONDENSED */ border-radius:50%;display:grid;place-items:center;
            background: linear-gradient(135deg, #ff2e4c, #c4001d);
            border:4px solid #fff;
            color:white;font-size:32px; /* CONDENSED */
            box-shadow:0 10px 30px rgba(255, 46, 76, 0.4);
            cursor:pointer;
            animation: pulse 2s infinite;
        }
        .heart-btn:active{transform:scale(.95)}
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .click-hint { font-size: 12px; /* CONDENSED */ font-weight: 600; color: #d12e4b; text-transform: uppercase; letter-spacing: 1px; }

        /* Hidden Message */
        .message{
            margin-top:0; padding:0; max-height:0; overflow:hidden; opacity:0; transition:all 0.8s ease;
        }
        .message.show{
            opacity:1; max-height:1000px; padding-top: 15px; /* CONDENSED */
        }
        .message h2{font-family:'Great Vibes',cursive;margin:0 0 8px; /* CONDENSED */ font-size:28px; /* CONDENSED */ color:#d12e4b}
        .message p{margin:0;color:#441122;line-height:1.6;font-size:16px; /* CONDENSED */ margin-bottom: 15px; /* CONDENSED */}

        /* Video Container (Maximized Size and Elevated Style) */
        .video-wrap{
            position:relative;
            /* CRITICAL FIX: Ensure height is defined */
            height: 0; 
            padding-top:66.6%;
            width: 100%;
            /* ‚ùó CRITICAL FIX: Give the video wrapper a min-height to prevent collapse on mobile */
            min-height: 200px; 
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.25), 0 0 0 4px #fff, 0 0 0 6px var(--accent);
            background-color: #f0f0f0;
        }
        
        /* üåü CRITICAL FIX: Ensure iframe renders correctly when parent is shown */
        .message.show .video-wrap {
             height: auto; /* Allow auto height calculation when revealed */
             min-height: 200px; /* Keep the aggressive min-height */
        }
        
        .message.show .video-wrap iframe {
            display: block; /* Force the iframe to render correctly */
        }
        
        .video-wrap iframe{
            position:absolute;left:0;top:0;width:100%;height:100%;border:0;
        }
    </style>
</head>
<body>
<div class="page">
    <div id="split-container">

        <div id="slideshow-background">
            <div class="bg-hearts" id="bgHearts"></div>
        </div>

        <div id="content-side">
            <div class="card" role="main">
                <div class="top">
                    <div class="photo" id="photo">
                        <img src="1.jpg" alt="Tsion & Gedion">
                    </div>
                    <div>
                        <h1>To my Beloved Tsion üíñ</h1>
                        <p class="lead">My constant song, across the miles.</p>
                    </div>
                </div>

                <div class="reveal-wrap">
                    <button class="heart-btn" id="revealBtn">‚ù§</button>
                    <span class="click-hint">Click Heart to Open</span>
                </div>

                <div class="message" id="messagePanel">
                    <h2>My Valentine</h2>
                    <p>
                        My love, distance has only shown me how deep my love runs. Happy Anniversary. Forever yours, Gedion ‚ù§Ô∏è
                    </p>

                    <div class="video-wrap" id="videoWrap">
                        <iframe id="ytplayer"
                                src=""
                                title="Ed Sheeran - Perfect"
                                allow="autoplay; encrypted-media; fullscreen"
                                allowfullscreen>
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // 1. üñºÔ∏è PHOTO CONFIG
    const TOTAL_INDEX_COUNT = 71; 
    const FADE_INTERVAL = 5500; 
    
    const FILE_EXTENSION = ".jpg"; 
    
    const photoList = [];
    const MISSING_INDICES = [6, 7, 8, 9];

    for (let i = 1; i <= TOTAL_INDEX_COUNT; i++) {
        
        if (MISSING_INDICES.includes(i)) {
            continue; 
        }
        
        let filename = `${i}${FILE_EXTENSION}`;
        photoList.push(filename);
    }
    
    // 2. ‚ö° SLIDESHOW SETUP (Final Logic)
    let photoElements = [];
    let currentIndex = 0;
    const ACTUAL_PHOTO_COUNT = photoList.length; 
    
    function setupSlideshow() {
        const container = document.getElementById('slideshow-background');
        
        photoList.forEach((url) => {
            const img = document.createElement('img');
            img.src = url;
            img.className = 'slideshow-photo';
            img.onerror = function() { 
                this.style.display='none'; 
            };
            container.appendChild(img);
            photoElements.push(img);
        });
        
        startSlideshowLoop();
    }

    function startSlideshowLoop() {
        if (photoElements.length === 0) return;

        photoElements[currentIndex].style.opacity = 1;

        setInterval(() => {
            photoElements[currentIndex].style.opacity = 0;
            currentIndex = (currentIndex + 1) % ACTUAL_PHOTO_COUNT;
            photoElements[currentIndex].style.opacity = 1;
        }, FADE_INTERVAL);
    }
    
    setupSlideshow();

    // 3. ‚ù§Ô∏è CLICK LOGIC
    const revealBtn = document.getElementById('revealBtn');
    const messagePanel = document.getElementById('messagePanel');
    const ytIframe = document.getElementById('ytplayer');
    let isRevealed = false;

    revealBtn.addEventListener('click', () => {
        if(!isRevealed){
            isRevealed = true;
            messagePanel.classList.add('show');
            revealBtn.style.display = 'none';
            document.querySelector('.click-hint').style.display = 'none';

            // üéµ VIDEO URL: START (17s) and END (281s = 4:41) for perfect loop.
            const videoURL = "https://www.youtube.com/embed/2Vv-BfVoq4g?autoplay=1&mute=0&controls=1&rel=0&loop=1&playlist=2Vv-BfVoq4g&start=17&end=281";
            ytIframe.src = videoURL;
        }
    });

    // Background Hearts
    (function makeHearts(){
        const container = document.getElementById('bgHearts');
        for(let i=0;i<20;i++){
            const el = document.createElement('i');
            el.style.left = (Math.random()*100)+'%';
            el.style.top = (Math.random()*100)+'%';
            el.style.animationDuration = (6+Math.random()*10) + 's';
            el.style.opacity = 0.4;
            el.style.animationDelay = (-Math.random()*10)+'s';
            container.appendChild(el);
        }
    })();
</script>
</body>
</html>
